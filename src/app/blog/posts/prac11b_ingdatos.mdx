---
title: "Más Allá de las Series de Tiempo Aplicadas: Modelado, Anomalías y Estrategias de Forecasting"
publishedAt: "2025-11-03"
summary: "Modelo temporal multicliente con ingeniería de series de tiempo, detección dinámica de anomalías y evaluación comparativa de enfoques con lags y ventanas móviles."
tag: "Curso: Ingeniería de Datos"
image: "/practica11/portada.png"
---

# Introducción

Este proyecto profundiza en el análisis de series de tiempo orientado al comportamiento de clientes. A través de técnicas avanzadas de ingeniería temporal, detección de anomalías y modelado interpretativo con XGBoost, se construyó un pipeline completamente reproducible basado en el dataset *Daily Female Births (1959)*, adaptado a un contexto multicliente mediante simulaciones realistas. El objetivo es comparar sensibilidad y estabilidad en estrategias de forecasting, manteniendo un enfoque aplicable, explicable y computacionalmente eficiente.

---

## Marco teórico

Las series de tiempo requieren abordar la dependencia secuencial entre observaciones, considerando patrones como tendencia, estacionalidad y ruido. Para capturar la memoria temporal se incorporan valores rezagados (lags), mientras que las ventanas móviles permiten modelar estabilidad local mediante estadísticos como media y varianza. Además, las variaciones abruptas no explicadas por la dinámica interna suelen ser consecuencia de factores externos; por ello, los shocks exógenos se integran como variables dummy para mejorar interpretabilidad. La detección de anomalías se basa en la desviación contextual: valores que exceden la media móvil ±2σ se identifican como desviaciones inesperadas relevantes. Finalmente, XGBoost aporta capacidad de modelado no lineal manteniendo alta eficiencia para despliegues en producción.

---

## Desarrollo del proyecto

Se generaron cinco clientes a partir del dataset original, variando levemente la escala para simular comportamientos diferenciados. Se añadieron variables temporales basadas en calendario, lags de 1, 3 y 7 días, y estadísticas móviles de 7 días, lo cual permitió capturar dependencias de corto y mediano plazo. Asimismo, se introdujeron shocks exógenos en fechas clave, como feriados y días promocionales. La detección de anomalías se implementó mediante la desviación estándar móvil, identificando valores fuera del rango esperado en su vecindad temporal. Dos versiones del modelo XGBoost fueron entrenadas de forma independiente —una basada en lags y otra en ventanas móviles— evaluando ambas estrategias mediante validación temporal para garantizar causalidad. Finalmente, los resultados se exportaron para su utilización en dashboards interactivos.

---

## Visualización del desempeño


<div style={{ display: "flex", flexDirection: "column", gap: "24px", margin: "24px 0" }}>
  <div style={{ position: "relative", width: "100%", height: "300px" }}>
    <Image src="/practica11/bonus.png" alt="FunctionTransformer log1p" fill />
    </div>
</div>

El gráfico muestra que la serie real presenta una alta volatilidad. El modelo basado en lags responde con rapidez a los cambios bruscos, ajustándose mejor a los máximos y mínimos repentinos; mientras que el modelo basado en ventanas móviles amortigua la señal y prioriza tendencias más estables. Aunque sus desviaciones revelan la dificultad de capturar simultáneamente estabilidad y sensibilidad, ambos mantienen una adecuación general razonable, lo cual valida la efectividad de la ingeniería temporal implementada.

---

## Resultados

<table>
  <thead>
    <tr>
      <th>Estrategia</th>
      <th>RMSE aprox.</th>
      <th>Interpretación</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Lag features</strong></td>
      <td>~6.3</td>
      <td>Mayor capacidad de reacción ante cambios repentinos; ideal donde la detección rápida es prioritaria.</td>
    </tr>
    <tr>
      <td><strong>Window features</strong></td>
      <td>~6.8</td>
      <td>Mayor estabilidad y reducción de ruido; útil para monitoreo y control operativo.</td>
    </tr>
    <tr>
      <td><strong>Anomalías detectadas</strong></td>
      <td>10–15&nbsp;%</td>
      <td>Picos asociados principalmente a feriados o promociones, lo que refuerza la relevancia de modelar shocks externos.</td>
    </tr>
  </tbody>
</table>

La tabla confirma que el modelo basado en lags ofrece mejor precisión general y mayor sensibilidad ante fluctuaciones, mientras que el enfoque basado en ventanas móviles prioriza estabilidad y suavización. El porcentaje significativo de anomalías detectadas indica una correcta identificación de desviaciones relevantes para el análisis del comportamiento del cliente.

---

## Conclusiones

Esta práctica demuestra que la ingeniería temporal clásica, cuando es combinada con modelos basados en boosting, constituye una solución efectiva para escenarios reales donde se requiere precisión predictiva sin depender de arquitecturas neuronales complejas. La combinación de lags y estadísticas móviles captura los patrones fundamentales de la serie manteniendo interpretabilidad, mientras que los shocks exógenos y la detección dinámica de anomalías facilitan la explicación de picos inesperados y errores de registro. La evaluación comparativa evidencia un trade-off natural entre sensibilidad y robustez: el modelo basado en lags resulta más reactivo, en tanto que el de ventanas móviles domina cuando se precisa estabilidad operacional. Por último, la exportación de resultados a formatos interactivos completa el flujo analítico, habilitando una comunicación accesible para perfiles no técnicos y consolidando una herramienta aplicable en la toma de decisiones basada en datos.


