---
title: "El Mapa Oculto del Ladrillo: Identificando Drivers de Precio en el Dataset de Ames."
publishedAt: "2025-09-15"
tag: "Curso: Ingenier√≠a de Datos"
image: "/practica5/portada.jpg"
---

## Introducci√≥n

El dataset **Ames Housing** constituye un caso de estudio cl√°sico para el an√°lisis de calidad en datos tabulares orientados a modelos predictivos de precios inmobiliarios. Esta pr√°ctica tuvo como prop√≥sito comprender y gestionar **faltantes (missingness)** y **outliers**, dos fen√≥menos que afectan tanto la inferencia estad√≠stica como el desempe√±o de machine learning.  

La aproximaci√≥n metodol√≥gica adoptada se desarroll√≥ siguiendo el ciclo:
- **Auditar ‚Üí Diagnosticar ‚Üí Imputar ‚Üí Validar impactos**

Todo ello **sin leakage**, mediante un pipeline reproducible.

---

## Marco te√≥rico: ¬øQu√© hay detr√°s de los datos faltantes?

Cuando una columna presenta valores ausentes, la decisi√≥n sobre c√≥mo tratarlos depende del **mecanismo subyacente**:

<table>
  <thead>
    <tr>
      <th>Mecanismo</th>
      <th>Definici√≥n</th>
      <th>Ejemplo en Ames Housing</th>
      <th>Riesgo al imputar</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>MCAR</strong></td>
      <td>Ausencia completamente aleatoria</td>
      <td>P√©rdidas accidentales en carga manual</td>
      <td>Introduce ruido pero sin sesgo</td>
    </tr>
    <tr>
      <td><strong>MAR</strong></td>
      <td>Ausencia depende de otra variable observada</td>
      <td><code>Garage Area</code> ausente cuando <code>Garage Type</code> = "No Garage"</td>
      <td>Imputar sin considerar estructura &rarr; sesgo</td>
    </tr>
    <tr>
      <td><strong>MNAR</strong></td>
      <td>Ausencia depende del valor faltante</td>
      <td>Vendedores que ocultan precios muy altos o muy bajos</td>
      <td>Imputar puede ocultar se√±al cr√≠tica</td>
    </tr>
  </tbody>
</table>

En t√©rminos econ√≥micos: el *missingness* puede reflejar **preferencias, restricciones o estrategias** en la oferta inmobiliaria ‚Äîy por tanto conviene **analizarlo como se√±al**, no como defecto.

El estudio detallado del patr√≥n de valores faltantes en Ames revela dimensiones del mercado que usualmente no son visibles en una simple auditor√≠a exploratoria. Por ejemplo, la ausencia de datos en caracter√≠sticas como BsmtQual o GarageType no es un accidente estad√≠stico, sino un reflejo expl√≠cito de viviendas que no poseen s√≥tano o garaje. Estas omisiones, lejos de constituir errores de recolecci√≥n, describen tipolog√≠as habitacionales, lo cual convierte al missingness en una variable informativa por s√≠ misma.

Cuando una columna categ√≥rica se vuelve faltante √∫nicamente en un subconjunto con significado econ√≥mico, esa ausencia pasa a ser un predictor indirecto relevante para el precio. Una vivienda sin garaje, en la mayor√≠a de los contextos urbanos de EE. UU., implica menor comodidad y, en consecuencia, un valor inmobiliario m√°s bajo. De este modo, la ausencia se comporta casi como una categor√≠a adicional, y su tratamiento requiere decisiones finas: eliminar filas borrar√≠a segmentos del mercado, mientras que rellenar sin marcar invisibilizar√≠a las diferencias estructurales.

En entornos donde los precios elevados se vuelven m√°s sensibles al escrutinio p√∫blico, tambi√©n pueden aparecer patrones MNAR: vendedores que optan por no registrar ciertos atributos cuando podr√≠an perjudicar la percepci√≥n de valor. En este sentido, el missingness puede ser una estrategia de ocultamiento o marketing inmobiliario, que debe ser tenida en cuenta para mantener la transparencia del proceso anal√≠tico.

---

### 1. Auditor√≠a inicial de la calidad

La exploraci√≥n comenz√≥ con el an√°lisis del **porcentaje de faltantes por columna**, identificando actores cr√≠ticos como `Garage Type`, `BsmtQual` y `FireplaceQu`.

<div style={{ display: 'flex', justifyContent: 'center', margin: '32px 0' }}>
  <img src="/practica5/missing_patterns.png" alt="Patrones de datos faltantes por columna" width="800" />
</div>

Este patr√≥n revela **faltantes estructurados**, t√≠picos de MAR:  
*no hay s√≥tano ‚Üí no hay calidad de s√≥tano*.

A nivel de filas:
- **p95**: 6 columnas faltantes  
- **p99**: 11 columnas faltantes  

Esto indica que la mayor√≠a de viviendas est√°n **bien completas**, mientras pocos subgrupos requieren tratamiento intensivo.

---

### 2. Outliers como reflejo de la estructura urbana

El mercado inmobiliario contiene casos extremos que **s√≠ existen**: mansiones, terrenos rurales amplios, barrios de alto valor. Por tanto, antes de eliminarlos es necesario interpretarlos.

<div style={{ display: 'flex', justifyContent: 'center', margin: '32px 0' }}>
  <img src="/practica5/outliers_analysis.png" alt="Comparaci√≥n de outliers por IQR y z-score" width="800" />
</div>

**Hallazgos principales:**

- **Lot Area**: fuerte cola derecha ‚Üí *parcelas excepcionalmente grandes*
- **SalePrice**: outliers que son **se√±al del lujo** ‚Üí no eliminar sin criterio

Se adopt√≥ una estrategia **mixta**:
- Winsorizing mediante **IQR** en vars. con asimetr√≠a severa
- Z-score para control en variables ~normales

El an√°lisis conjunto de outliers por IQR y Z-Score evidenci√≥ que las colas largas del dataset est√°n relacionadas con din√°micas socioecon√≥micas reales: propiedades premium, barrios emergentes y terrenos cuyo uso no es plenamente residencial. Por ello, considerar todo valor extremo como ruido metodol√≥gico ser√≠a equivalente a negar la heterogeneidad natural del mercado.

Sin embargo, en ciertos casos, los outliers s√≠ pueden deberse a errores operacionales, por ejemplo 
en mediciones incorrectas, d√≠gitos mal tipeados, fechas intempestivas ancladas en 1900/2200,
o valores at√≠picos simult√°neamente en m√∫ltiples variables inconsistentes.

Esto obliga a una distinci√≥n fundamental:
- Outliers plausibles ‚Üí representan el dominio y deben preservarse.
- Outliers imposibles ‚Üí deben corregirse o descartarse.

El uso combinado de IQR y Z-Score permite identificar superposiciones: valores se√±alados por ambos m√©todos suelen ser candidatos m√°s fuertes a inspecci√≥n. Para el resto, se recomienda winsorizing conservador o etiquetado, sin eliminar su contribuci√≥n estructural.

Desde la perspectiva de ML, los outliers no son necesariamente perjudiciales:
muchos modelos ‚Äîcomo √°rboles de decisi√≥n, gradient boosting o random forests‚Äî se benefician de detectar segmentos premium que generan reglas m√°s finas.
En definitiva, la decisi√≥n no es t√©cnica, es sem√°ntica: si un valor puede existir en el mercado, entonces tiene derecho a existir en el dataset.

---

### 3. Imputaci√≥n informada: preservar la historia econ√≥mica

Las imputaciones se dise√±aron **por tipo y mecanismo**:

- **Num√©ricas (asim√©tricas)** ‚Üí **mediana**  
- **Num√©ricas (~normales)** ‚Üí **media**
- **Categ√≥ricas** ‚Üí **moda** o `"Unknown"` cuando existe condici√≥n sem√°ntica
- **MNAR sospechoso** ‚Üí indicar con *flag* para modelado

Esto evita que el modelo:

- Aprenda reglas inexistentes (por sesgo)
- ‚ÄúCastigue‚Äù viviendas sin garage como si fuera error de medici√≥n

En ciencia de datos aplicada a decisiones econ√≥micas, la imputaci√≥n puede influir directamente en la evaluaci√≥n de activos, y por ende en el bienestar de personas y comunidades. Documentar claramente las transformaciones es esencial para evitar que el modelo introduzca inequidad o efectos regresivos: un algoritmo que aprenda a penalizar viviendas sin ciertas caracter√≠sticas podr√≠a replicar sesgos socio-espaciales preexistentes.
La reproducibilidad no es un requisito acad√©mico, sino una garant√≠a de justicia algor√≠tmica. Si un modelo afecta tasaciones, tasas hipotecarias o priorizaci√≥n urbana, debe ser posible defender y auditar cada paso ante actores externos.
Este trabajo avanza en esa direcci√≥n: el dataset queda preparado para modelado responsable, sin sacrificar interpretabilidad ni rigor estad√≠stico.

---

### 4. Validaci√≥n: impacto en distribuciones

La imputaci√≥n correcta debe **conservar estructura**, no reescribir la realidad del mercado.

<div style={{ display: 'flex', justifyContent: 'center', margin: '32px 0' }}>
  <img src="/practica5/distribution_comparison.png" alt="Distribuciones antes y despu√©s de imputaci√≥n" width="850" />
</div>

üí° Se observa **m√≠nimo estrechamiento** en `SalePrice` y `YearBuilt`:  
esperable al reemplazar extremos por valores centrales.

---

### 5. Evaluaci√≥n del impacto en correlaci√≥n

Un preprocesamiento irresponsable puede destruir relaciones significativas para el modelo.

<div style={{ display: 'flex', justifyContent: 'center', margin: '32px 0' }}>
  <img src="/practica5/correlation_comparison.png" alt="Mapa de correlaciones antes vs despu√©s" width="850" />
</div>

Las correlaciones se mantienen estables ‚Üí **el pipeline preserva se√±al predictiva**.  
La reducci√≥n leve de fuerza en `SalePrice` es el **costo aceptable** de imputar robustamente.

---

### 6. Indicadores de calidad y cobertura

<table>
  <thead>
    <tr><th>Indicador</th><th>Observaci√≥n</th></tr>
  </thead>
  <tbody>
    <tr><td>Columnas con missingness</td><td>19 (~15%), patr√≥n MAR dominante</td></tr>
    <tr><td>Outliers IQR</td><td>Lot Area: ~127 casos</td></tr>
    <tr><td>Outliers Z-score</td><td>SalePrice: ~65 casos</td></tr>
    <tr><td>Imputaci√≥n</td><td>Num: mediana/media ¬∑ Cat: moda/"Unknown"</td></tr>
    <tr><td>Anti-leakage</td><td>Imputer ajustado solo con <strong>train</strong></td></tr>
  </tbody>
</table>

---

## Decisiones documentadas (ADR-lite)

- **Pipeline √∫nico**, evitando divergencias entre EDA y producci√≥n  
- **Flags de imputaci√≥n** para MNAR sospechoso  
- **Imputaci√≥n diferenciada** seg√∫n sem√°ntica inmobiliaria  
- **No eliminar outliers verdaderos** ‚Üí son comportamiento econ√≥mico real  

---

## Conclusiones

El an√°lisis demostr√≥ que los faltantes en Ames Housing **no son aleatorios**:  
reflejan **caracter√≠sticas funcionales de las viviendas** y decisiones en su registro.

Se concluye que:

- La **missingness puede ser se√±al econ√≥mica**, no solo ruido
- **Imputar** implica introducir teor√≠a del dominio
- **Outliers** representan nichos reales del mercado, no errores
- La correcta aplicaci√≥n de **anti-leakage** es diferencial para modelos confiables

Este enfoque prepara la base para la siguiente etapa:  
**modelos predictivos que respeten la estructura real del mercado inmobiliario**.


